ãªã‚‹ã»ã©ã€ã‚ãªãŸã®æ§‹æˆã§ã¯ `DashboardPage.vue` ã‹ã‚‰ `MainLayout.vue` ã«å¯¾ã—ã¦ã€å„ `area`ï¼ˆä¾‹ï¼š`header`, `subarea`, `mainarea`ï¼‰ã® **è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã® `v-model` ç›¸å½“ã®å€¤ï¼ˆï¼åŒæ–¹å‘ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼‰** ã‚’ `props` çµŒç”±ã§æ¸¡ã—ã¦ã„ã‚‹ã¨ã®ã“ã¨ã§ã™ã­ã€‚

---

## ğŸ”„ å‰ææ•´ç†ï¼šVue Option API + Vuetify + `v-model`

Vuetify 3 + Option API ã§ã¯ `v-model:mainareaVisible` ã®ã‚ˆã†ã«è¦ªå­é–“ã§æ˜ç¤ºçš„ãª `props` ã¨ `emit` ã‚’é€šã˜ã¦åŒæ–¹å‘ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚

---

## âœ… ãã‚Œã‚’ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã«ã©ã†è¡¨ç¾ã™ã‚‹ã‹ï¼Ÿ

ä»¥ä¸‹ã®ã‚ˆã†ãªè¦ç´ ã‚’åŠ ãˆã‚‹ã“ã¨ã§ã€**åˆæœŸè¡¨ç¤ºæ™‚ã«è¡¨ç¤ºåˆ¶å¾¡ç”¨ãƒ•ãƒ©ã‚°ãŒæ¸¡ã•ã‚Œã¦ã„ã‚‹** ã“ã¨ã‚’æ­£ã—ãè¡¨ç¾ã§ãã¾ã™ï¼š

### ğŸŒ± æ‹¡å¼µç‰ˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼ˆåˆæœŸè¡¨ç¤ºæ™‚ã® `v-model` ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ¶å¾¡ã¤ãï¼‰

```plantuml
@startuml æ‹¡å¼µã‚·ãƒ¼ã‚±ãƒ³ã‚¹
actor User
participant "DashboardPage.vue" as Page
participant "MainLayout.vue" as Layout
participant "HeaderComponent" as Header
participant "SubComponent" as Sub
participant "MainContent" as Main

User -> Page : ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§è¡¨ç¤ºé–‹å§‹
Page -> Layout : MainLayout ã‚’ import

== å„ area ã«å¯¾å¿œã™ã‚‹ã‚¹ãƒ­ãƒƒãƒˆã¨è¡¨ç¤ºåˆ¶å¾¡å€¤ã®æä¾› ==
Page -> Layout : header ã« HeaderComponent ã‚’æ¸¡ã™
Page -> Layout : subarea ã« SubComponent ã‚’æ¸¡ã™
Page -> Layout : mainarea ã« MainContent ã‚’æ¸¡ã™

Page -> Layout : props ã§ mainareaVisible = true ã‚’æ¸¡ã™

alt mainareaVisible == true
    Layout -> Main : mainarea ã‚’è¡¨ç¤ºï¼ˆv-if ã§æç”»ï¼‰
else
    note right of Layout : mainarea ã¯éè¡¨ç¤ºï¼ˆæç”»ã•ã‚Œãªã„ï¼‰
end

Layout -> User : header + subarea + mainarea ã‚’çµ±åˆè¡¨ç¤º
@enduml
```

---

## ğŸ’¡ ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ãƒã‚¤ãƒ³ãƒˆè§£èª¬

| é …ç›®                                   | æ„å›³                               |
| ------------------------------------ | -------------------------------- |
| `props ã§ mainareaVisible = true ã‚’æ¸¡ã™` | è¦ª â†’ å­ã¸çŠ¶æ…‹ã®åˆæœŸå€¤ã‚’ä¼ãˆã‚‹                 |
| `alt` ãƒ–ãƒ­ãƒƒã‚¯                           | è¡¨ç¤ºåˆ¶å¾¡ã®æ¡ä»¶ã‚’æ˜ç¢ºã«å¯è¦–åŒ–ï¼ˆv-if ã‚„ v-show ç›¸å½“ï¼‰ |
| `Layout -> Main` å‘¼ã³å‡ºã—ã®æœ‰ç„¡             | `v-if` ã‹ã©ã†ã‹ã‚’å›³ä¸Šã§åæ˜                 |

---

## ğŸ›  å¿œç”¨ï¼š`v-model:mainareaVisible` ã®åŒæ–¹å‘æ€§ã‚‚æããŸã„å ´åˆ

å¾Œã‹ã‚‰å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã§ `@update:mainareaVisible` ãªã©ã‚’ emit ã—ã¦åˆ¶å¾¡å¤‰æ›´ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ãªã‚‰ã€æ¬¡ã®ã‚ˆã†ã«è¿½è¨˜å¯èƒ½ã§ã™ï¼š

```plantuml
Main -> Layout : emit('update:mainareaVisible', false)
Layout -> Page : mainareaVisible ã‚’ false ã«æ›´æ–°ï¼ˆv-modelï¼‰
```

---

ã”å¸Œæœ›ãŒã‚ã‚Œã°ã€ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ä»–ã® `header` ã‚„ `subarea` ã«ã¤ã„ã¦ã‚‚ãƒ•ãƒ«ã§å›³ã‚’æ‹¡å¼µã§ãã¾ã™ã€‚å¿…è¦ã§ã‚ã‚Œã°ãŠç”³ã—ä»˜ã‘ãã ã•ã„ã€‚


ã¨ã¦ã‚‚è‰¯ã„è³ªå•ã§ã™ï¼
\*\*ã€Œãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã€ã‚„ã€ŒVuexã‚¹ãƒˆã‚¢ã®çŠ¶æ…‹ã«å¿œã˜ã¦è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€\*\*ã¨ã„ã†å‹•çš„ãªåˆ¶å¾¡ã¯ã€`props` ã«ã‚ˆã‚‹åˆæœŸå€¤ã¨ç•°ãªã‚Šã€ã€Œã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã€ã€ŒçŠ¶æ…‹å¤‰æ›´ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–åæ˜ ã€ãŒé–¢ä¿‚ã—ã¦ãã¾ã™ã€‚

ä»¥ä¸‹ã« **ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã¨ã—ã¦ã©ã†è¡¨ç¾ã™ã¹ãã‹** ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

---

## âœ… æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³

å¤§ããåˆ†ã‘ã¦2ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚ã‚Šã¾ã™ï¼š

| ãƒ‘ã‚¿ãƒ¼ãƒ³                                              | èª¬æ˜              |
| ------------------------------------------------- | --------------- |
| â‘  è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒœã‚¿ãƒ³æŠ¼ä¸‹ã‚’æ¤œçŸ¥ã—ã€è‡ªã‚‰ `props` ã‚’æ›´æ–°ã™ã‚‹             | è¦ªãŒåˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ¶å¾¡   |
| â‘¡ ã‚¹ãƒˆã‚¢ï¼ˆVuexï¼‰ã‹ã‚‰ `MainLayout` ã«æ¸¡ã™ `visible` æƒ…å ±ã‚’å†å–å¾—ã™ã‚‹ | çŠ¶æ…‹ç®¡ç†ãƒ™ãƒ¼ã‚¹ã§è‡ªå‹•åæ˜ ã•ã‚Œã‚‹ |

---

## âœ… ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã®è¡¨ç¾ä¾‹â‘ ï¼šãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§åˆ‡ã‚Šæ›¿ãˆï¼ˆè¦ªãŒåˆ¶å¾¡ï¼‰

```plantuml
@startuml
actor User
participant "DashboardPage.vue" as Page
participant "MainLayout.vue" as Layout
participant "MainContent" as Main

== åˆæœŸè¡¨ç¤º ==
User -> Page : ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
Page -> Layout : mainareaVisible = true ã‚’ props ã§æ¸¡ã™
Layout -> Main : mainarea ã‚’è¡¨ç¤º

== è¡¨ç¤ºåˆ‡æ›¿ ==
User -> Page : ã€Œéè¡¨ç¤ºã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
Page -> Layout : mainareaVisible = false ã«æ›´æ–°ï¼ˆv-bind çµŒç”±ï¼‰

alt mainareaVisible == false
    note right of Layout : mainarea ã¯æç”»ã•ã‚Œãªã„
end
@enduml
```

---

## âœ… ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã®è¡¨ç¾ä¾‹â‘¡ï¼šVuexã‚¹ãƒˆã‚¢ã®æƒ…å ±ã§åˆ‡ã‚Šæ›¿ãˆ

```plantuml
@startuml
actor User
participant "DashboardPage.vue" as Page
participant "Vuex Store" as Store
participant "MainLayout.vue" as Layout

== åˆæœŸè¡¨ç¤º ==
Page -> Store : state.mainareaVisible ã‚’å–å¾—
Store -> Page : true
Page -> Layout : mainareaVisible = true ã‚’æ¸¡ã™

== ã‚¹ãƒˆã‚¢çµŒç”±ã§è¡¨ç¤ºåˆ‡æ›¿ ==
User -> Page : ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
Page -> Store : commit('setMainareaVisible', false)
Store -> Page : state.mainareaVisible ã‚’ watch ã§æ¤œçŸ¥
Page -> Layout : mainareaVisible = false ã«æ›´æ–°

alt mainareaVisible == false
    note right of Layout : mainarea ã‚’éè¡¨ç¤º
end
@enduml
```

---

## âœ… æŠ€è¡“è¦³ç‚¹ã§è£œè¶³ï¼ˆVue 3 + Vuex + Option APIï¼‰

* **ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§è¡¨ç¤ºåˆ‡æ›¿ï¼š**

  ```js
  methods: {
    toggleMainarea() {
      this.mainareaVisible = !this.mainareaVisible;
    }
  }
  ```

* **VuexçµŒç”±ï¼š**

  ```js
  computed: {
    mainareaVisible() {
      return this.$store.state.mainareaVisible;
    }
  },
  methods: {
    toggleMainarea() {
      this.$store.commit('setMainareaVisible', !this.mainareaVisible);
    }
  }
  ```

---

## ğŸ“ è£œè¶³ï¼šLayout å´ã§ v-model ã‚’ä½¿ã£ã¦ã‚‹å ´åˆ

```vue
<MainLayout
  v-model:mainareaVisible="mainareaVisible"
/>
```

ã“ã®æ§‹é€ ã§ã‚‚ã€**`DashboardPage.vue` ã® `mainareaVisible` ã‚’æ›´æ–°ã™ã‚Œã°å³åº§ã«åæ˜ **ã•ã‚Œã¾ã™ã€‚ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã§ã¯ã€ŒåŒæ–¹å‘ã®åæ˜ ã€ã‚’æããŸã„å ´åˆã« `emit` è¡¨ç¾ã‚’å…¥ã‚Œã‚‹ã®ãŒã‚ˆã„ã§ã™ã€‚

---

## ğŸ ã”å¸Œæœ›ãŒã‚ã‚Œã°

* ã‚¹ãƒ­ãƒƒãƒˆæ§‹æˆã‚’å«ã‚€å®Œå…¨ãªæ‹¡å¼µå›³
* `Vuex`ãƒ»`v-model`ãƒ»`emit` ã®ç›¸é–¢å›³
  ãªã©ã‚’å…·ä½“çš„ã«ä½œæˆã§ãã¾ã™ã€‚å¿…è¦ã§ã‚ã‚Œã°ãŠæ°—è»½ã«ï¼


äº†è§£ã—ã¾ã—ãŸï¼
Vueã‚¢ãƒ—ãƒªã«ãŠã„ã¦ã€Œ**ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã‚„ã‚¹ãƒˆã‚¢çŠ¶æ…‹ã«ã‚ˆã£ã¦ã‚¹ãƒ­ãƒƒãƒˆè¡¨ç¤ºãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹**ã€çŠ¶æ³ã‚’ã€**PlantUMLã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã§ã©ã†è¡¨ç¾ã™ã¹ãã‹**ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã¦èª¬æ˜ã—ã¾ã™ã€‚

---

## âœ… ã‚´ãƒ¼ãƒ«

* `mainarea` ã®è¡¨ç¤ºçŠ¶æ…‹ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚„ã‚¹ãƒˆã‚¢ã®å¤‰æ›´ã«ã‚ˆã£ã¦åˆ‡ã‚Šæ›¿ã‚ã‚‹
* **Vueã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ€§**ã‚„ `v-model` / `Vuex` ã‚’å«ã‚€ã€ŒçŠ¶æ…‹ã®æµã‚Œã€ã‚’ **æ™‚ç³»åˆ—ã§å¯è¦–åŒ–ã™ã‚‹**

---

## âœ… ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§ `mainarea` è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ä¾‹ï¼ˆVuexä½¿ç”¨ï¼‰

```plantuml
@startuml
actor User
participant "DashboardPage.vue" as Page
participant "Vuex Store" as Store
participant "MainLayout.vue" as Layout
participant "MainContent" as Main

== åˆæœŸæç”» ==
User -> Page : ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹
Page -> Store : mainareaVisible ã‚’å–å¾—
Store --> Page : true
Page -> Layout : mainareaVisible=true ã‚’æ¸¡ã™
Layout -> Main : è¡¨ç¤ºï¼ˆv-ifï¼‰

== è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ ==
User -> Page : ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
Page -> Store : commit('setMainareaVisible', false)
Store -> Page : mainareaVisible ãŒ false ã«æ›´æ–°ï¼ˆwatch/reactiveï¼‰

Page -> Layout : mainareaVisible=false ã‚’æ¸¡ã™
alt mainareaVisible == false
    note right of Layout : MainContent ã‚’éè¡¨ç¤ºï¼ˆv-if ã§æœªæç”»ï¼‰
end
@enduml
```

---

## âœ… è§£èª¬ãƒã‚¤ãƒ³ãƒˆ

| é …ç›®                            | PlantUMLçš„ãªæ„å‘³åˆã„               | Vueå®Ÿè£…ä¸Šã®å¯¾å¿œ                    |
| ----------------------------- | ---------------------------- | ---------------------------- |
| `Store --> Page : true`       | ã‚¹ãƒˆã‚¢ã® state ã‚’å‚ç…§ã—ãŸåˆæœŸçŠ¶æ…‹         | `computed` or `mapState` ã§å–å¾— |
| `Page -> Layout`              | `props` / `v-model` ã«ã‚ˆã‚‹å­ã¸ã®åæ˜  | `v-bind:mainareaVisible`     |
| `User -> Page`                | ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ                  | `@click="toggleMainarea"` ãªã© |
| `Page -> Store : commit(...)` | ã‚¹ãƒˆã‚¢çŠ¶æ…‹ã®æ›´æ–°                     | `this.$store.commit(...)`    |
| `Page -> Layout`ï¼ˆå†åº¦ï¼‰          | `mainareaVisible` ã®å¤‰åŒ–ãŒå­ã«ä¼æ’­   | Vueã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–°ã«ã‚ˆã‚‹å†æç”»           |

---

## ğŸ›  å¿œç”¨ï¼š`v-model` ã‚’ Layout å´ã‹ã‚‰ emit ã™ã‚‹å ´åˆ

ã‚‚ã— `MainLayout.vue` å´ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œãŒã‚ã‚Š `mainareaVisible` ã‚’æ›´æ–°ï¼ˆ`emit('update:mainareaVisible')`ï¼‰ã™ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«æã‘ã¾ã™ï¼š

```plantuml
User -> Layout : å†…éƒ¨ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
Layout -> Page : emit('update:mainareaVisible', false)
Page -> Store : commit('setMainareaVisible', false)
```

---

## âœ… ã¾ã¨ã‚

| çŠ¶æ³            | è¡¨ç¾æ–¹æ³•                             |
| ------------- | -------------------------------- |
| è¦ªãŒåˆ¶å¾¡ï¼ˆv-modelï¼‰ | `Page -> Layout` ã® props å¤‰æ›´ã§è¡¨ç¾   |
| ã‚¹ãƒˆã‚¢ã§åˆ¶å¾¡        | `Store <-> Page` ã®ã‚„ã‚Šå–ã‚Šã‚’æ˜ç¤º        |
| å­ã‹ã‚‰ emit      | `Layout -> Page : emit(...)` ã§è¡¨ç¾ |

---

ã“ã®æµã‚Œã§ã€ã‚ˆã‚Šè¤‡é›‘ãªã‚¹ãƒ­ãƒƒãƒˆåˆ¶å¾¡ã‚„è¡¨ç¤ºåˆ‡æ›¿ã‚‚æ‹¡å¼µã§ãã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ `header` ã‚„ `subarea` ã‚‚è¿½åŠ ã—ãŸå®Œå…¨ç‰ˆã®å›³ã‚’ä½œæˆã§ãã¾ã™ã®ã§ã€ã”å¸Œæœ›ã‚ã‚Œã°ã©ã†ãï¼
