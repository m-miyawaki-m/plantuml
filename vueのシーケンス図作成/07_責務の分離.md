Vue 3 + Vuetify 3 + Vuex ã‚’ä½¿ç”¨ã—ã€`defineComponent`ï¼ˆï¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³APIï¼‰ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨­è¨ˆã™ã‚‹éš›ã€å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®**è²¬å‹™ï¼ˆå½¹å‰²ï¼‰åˆ†é›¢**ã¯éå¸¸ã«é‡è¦ã§ã™ã€‚ä»¥ä¸‹ã«ã€ãã‚Œãã‚Œã®è²¬å‹™ã‚’æ•´ç†ã—ã¾ã™ã€‚

---

## âœ… 1. `defineComponent`ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ã®è²¬å‹™

**å½¹å‰²ï¼šUIè¡¨ç¤ºã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã®ç®¡ç†**

| è¦ç´          | è²¬å‹™å†…å®¹                                |
| ---------- | ----------------------------------- |
| `template` | UIã®æ§‹é€ ï¼ˆVuetifyã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å«ã‚€ï¼‰            |
| `data()`   | ä¸€æ™‚çš„ãªçŠ¶æ…‹ï¼ˆUIæ“ä½œçŠ¶æ…‹ã‚„ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ãªã©ï¼‰             |
| `methods`  | UIã«ç´ã¥ãæ“ä½œãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ï¼ˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ãƒ»ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ãªã©ï¼‰ |
| `computed` | ã‚¹ãƒˆã‚¢ã‹ã‚‰ã®çŠ¶æ…‹å¤‰æ›ã€è¡¨ç¤ºç”¨ã®åŠ å·¥ãƒ­ã‚¸ãƒƒã‚¯               |
| `props`    | è¦ªã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å—ã‘å–ã‚Šï¼ˆstoreã«ä¾å­˜ã—ãªã„ï¼‰            |

> â—ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯ **åŸºæœ¬çš„ã« store ã«ç§»è­²**ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯è¡¨ç¤ºã¨æ“ä½œã«é›†ä¸­ã•ã›ã‚‹ã®ãŒåŸå‰‡ã€‚

---

## âœ… 2. Vuetify 3 ã®è²¬å‹™

**å½¹å‰²ï¼šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª**

| ã‚«ãƒ†ã‚´ãƒª   | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹                                    | è²¬å‹™           |
| ------ | ------------------------------------------- | ------------ |
| è¡¨ç¤ºç³»    | `v-card`, `v-list`, `v-table`, `v-alert`    | UIæ§‹é€ ã¨è¡¨ç¤º      |
| æ“ä½œç³»    | `v-btn`, `v-switch`, `v-checkbox`           | ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒˆãƒªã‚¬ãƒ¼   |
| ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ› | `v-text-field`, `v-select`, `v-form`        | å…¥åŠ›è¦ç´ ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ  | `v-container`, `v-row`, `v-col`, `v-spacer` | UIã®è¦‹ãŸç›®ã¨æ§‹é€     |

> â—Vuetifyã¯**ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒãŸãªã„** â†’ çŠ¶æ…‹ç®¡ç†ã¯Vueå´ï¼ˆdata, computed, storeï¼‰ã§è¡Œã†ã€‚

---

## âœ… 3. Vuex ã®è²¬å‹™

**å½¹å‰²ï¼šçŠ¶æ…‹ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®é›†ä¸­ç®¡ç†**

| åŒºåˆ†          | å†…å®¹                                               |
| ----------- | ------------------------------------------------ |
| `state`     | ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹çŠ¶æ…‹ã€‚APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚„UIåˆ¶å¾¡ãƒ•ãƒ©ã‚°ã‚’å«ã‚€                 |
| `getters`   | stateã®æ´¾ç”Ÿãƒ‡ãƒ¼ã‚¿ã€å…±é€šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆä¾‹ï¼šãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚„åŠ å·¥å‡¦ç†ï¼‰                 |
| `mutations` | åŒæœŸçš„ã« state ã‚’å¤‰æ›´ã€‚Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ `commit` ã§å‘¼ã³å‡ºã™       |
| `actions`   | éåŒæœŸå‡¦ç†ï¼ˆAPIé€šä¿¡ãªã©ï¼‰ã¨ã€mutations ã®çµ„ã¿åˆã‚ã›å®Ÿè¡Œ               |
| `modules`   | ãƒšãƒ¼ã‚¸å˜ä½ or ãƒ‰ãƒ¡ã‚¤ãƒ³å˜ä½ã§åˆ†å‰²ç®¡ç†ï¼ˆä¾‹ï¼šuser, dashboard, sensorç­‰ï¼‰ |

> â—**APIã¨ã®é€šä¿¡ãƒ»çŠ¶æ…‹ä¿æŒãƒ»ãƒ‡ãƒ¼ã‚¿æ•´å½¢ã¯ Vuex ã§ç®¡ç†**ã€‚Vueå´ã§ç›´æ¥APIå‘¼ã³å‡ºã—ã¯ã—ãªã„æ§‹æˆã«ã™ã‚‹ã“ã¨ã§è²¬å‹™åˆ†é›¢ãŒæ˜ç¢ºã«ãªã‚‹ã€‚

---

## ğŸ” ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚¤ãƒ¡ãƒ¼ã‚¸

```plaintext
[ API ] â†’ [ Vuex: actions â†’ mutations â†’ state ] â†’ [ Component: computed / watch ]
                                         â†‘
                                  [ Component: methods ]
```

---

## ğŸ“Œ ã‚ˆãã‚ã‚‹è²¬å‹™ã®ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³

| ãƒ‘ã‚¿ãƒ¼ãƒ³                 | å•é¡Œç‚¹                 | æ¨å¥¨æ–¹æ³•                     |
| -------------------- | ------------------- | ------------------------ |
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§APIã‚’ç›´æ¥å‘¼ã³å‡ºã™   | è²¬å‹™ãŒæ··åœ¨ã—ã€å†åˆ©ç”¨ãƒ»ä¿å®ˆãŒå›°é›£ã«ãªã‚‹ | Vuexã®`actions`ã«å‡¦ç†ã‚’ç§»ã™     |
| Vuexã«UIæ“ä½œç”¨ã®çŠ¶æ…‹ã‚’å…¥ã‚Œã‚‹    | çŠ¶æ…‹ç®¡ç†ãŒè‚¥å¤§åŒ–ã—ã€é–¢å¿ƒã®åˆ†é›¢ãŒæ›–æ˜§ã« | UIçŠ¶æ…‹ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®`data()`ã«ä¿æŒ |
| computedã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ã | è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã¨å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ãŒæ··åœ¨ã™ã‚‹  | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯storeã®gettersã¸  |

---

## ğŸ§© çŠ¶æ…‹ã®åˆ†é¡æŒ‡é‡ï¼ˆã©ã“ã§ç®¡ç†ã™ã¹ãã‹ï¼Ÿï¼‰

| ç¨®é¡            | ç®¡ç†å ´æ‰€              | ç†ç”±                |
| ------------- | ----------------- | ----------------- |
| APIã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿  | Vuex `state`      | ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«åˆ©ç”¨ã™ã‚‹ãŸã‚      |
| ä¸€æ™‚çš„ãªå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹  | `data()`          | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å®Œçµ       |
| é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã®ç•ªå·    | Vuex `state`      | è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å…±æœ‰      |
| ãƒ¢ãƒ¼ãƒ€ãƒ«ã®è¡¨ç¤ºON/OFF | è¦ªã§ `data()`       | è¡¨ç¤ºã®ON/OFFã¯è¦ªãŒåˆ¶å¾¡    |
| ã‚»ãƒ³ã‚µãƒ¼ã®é¸æŠçŠ¶æ…‹     | Vuex ã¾ãŸã¯ `data()` | ãƒ‡ãƒ¼ã‚¿æ›´æ–°é »åº¦ãƒ»å…±æœ‰ç¯„å›²ã«ã‚ˆã‚Šåˆ¤æ–­ |

---

ã”å¸Œæœ›ã§ã‚ã‚Œã°ã€`SensorOnOffChart.vue` ãªã©ã®å®Ÿè£…ä¾‹ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€Œè²¬å‹™åˆ†é›¢ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ä¾‹ã€ã‚‚æç¤ºã§ãã¾ã™ã€‚å¿…è¦ã§ã‚ã‚Œã°ãŠç”³ã—ä»˜ã‘ãã ã•ã„ã€‚

äº†è§£ã—ã¾ã—ãŸï¼
ã§ã¯ã€ä»¥ä¸‹ã« `SensorOnOffChart.vue` ã‚’ä¾‹ã«ã—ãŸ **Vueï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³APIï¼‰+ Vuetify 3 + Vuex** ã®**è²¬å‹™åˆ†é›¢ã®å‚è€ƒå®Ÿè£…**ã‚’æç¤ºã—ã¾ã™ã€‚

---

## ğŸ¯ æƒ³å®šã‚·ãƒŠãƒªã‚ª

* ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã§ã‚»ãƒ³ã‚µãƒ¼ç¨®åˆ¥ã‚’é¸æŠï¼ˆ`v-select`ï¼‰
* é¸æŠã«å¿œã˜ãŸã‚»ãƒ³ã‚µãƒ¼ON/OFFãƒãƒ£ãƒ¼ãƒˆã‚’è¡¨ç¤ºï¼ˆApexChartsï¼‰
* ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã¯ Vuex ã«ä¿æŒã—ã€è¡¨ç¤ºã®ã¿ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒé–¢ä¸

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆç°¡ç•¥ï¼‰

```
components/
  SensorOnOffChart.vue      â† è¡¨ç¤ºãƒ»æ“ä½œ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
store/
  sensor.ts                 â† çŠ¶æ…‹ã¨ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆVuexãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰
```

---

## ğŸ§  Vuexï¼ˆ`store/sensor.ts`ï¼‰

```ts
// store/sensor.ts
import { Module } from 'vuex';

interface SensorState {
  selectedSensorType: string;
  sensorDataMap: { [type: string]: { x: string; y: [number, number] }[] };
}

export const sensor: Module<SensorState, any> = {
  namespaced: true,
  state: () => ({
    selectedSensorType: 'TypeA',
    sensorDataMap: {}
  }),
  mutations: {
    setSelectedSensorType(state, sensorType: string) {
      state.selectedSensorType = sensorType;
    },
    setSensorData(state, { type, data }: { type: string; data: { x: string; y: [number, number] }[] }) {
      state.sensorDataMap[type] = data;
    }
  },
  getters: {
    selectedSensorData(state) {
      return state.sensorDataMap[state.selectedSensorType] || [];
    }
  },
  actions: {
    async fetchSensorData({ commit }, type: string) {
      // æœ¬æ¥ã¯APIå‘¼ã³å‡ºã—ï¼ˆã“ã“ã§ã¯ä»®ãƒ‡ãƒ¼ã‚¿ï¼‰
      const data = [
        { x: 'SensorA', y: [Date.now(), Date.now() + 600000] }
      ];
      commit('setSensorData', { type, data });
    }
  }
};
```

---

## ğŸ§© ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ`SensorOnOffChart.vue`ï¼‰

```vue
<template>
  <v-container class="d-flex align-center">
    <v-select
      v-model="selectedSensorType"
      :items="sensorTypes"
      label="ã‚»ãƒ³ã‚µãƒ¼ç¨®åˆ¥"
      style="max-width: 150px"
    />
    <apexchart
      type="rangeBar"
      height="300"
      :options="chartOptions"
      :series="chartSeries"
    />
  </v-container>
</template>

<script lang="ts">
import { defineComponent, computed, watch } from 'vue';
import { useStore } from 'vuex';
import VueApexCharts from 'vue3-apexcharts';

export default defineComponent({
  components: { apexchart: VueApexCharts },
  data() {
    return {
      sensorTypes: ['TypeA', 'TypeB', 'TypeC']
    };
  },
  computed: {
    selectedSensorType: {
      get() {
        return this.$store.state.sensor.selectedSensorType;
      },
      set(value: string) {
        this.$store.commit('sensor/setSelectedSensorType', value);
      }
    },
    chartSeries() {
      const data = this.$store.getters['sensor/selectedSensorData'];
      return [{ name: this.selectedSensorType, data }];
    },
    chartOptions() {
      return {
        chart: {
          type: 'rangeBar'
        },
        xaxis: {
          type: 'datetime'
        }
      };
    }
  },
  watch: {
    selectedSensorType: {
      immediate: true,
      handler(type: string) {
        this.$store.dispatch('sensor/fetchSensorData', type);
      }
    }
  }
});
</script>
```

---

## âœ… è²¬å‹™åˆ†é›¢ã®ãƒã‚¤ãƒ³ãƒˆã¾ã¨ã‚

| å±¤                  | è²¬å‹™                                                        |
| ------------------ | --------------------------------------------------------- |
| Vuex (`store/`)    | - ã‚»ãƒ³ã‚µãƒ¼çŠ¶æ…‹ã®ä¿æŒ<br>- é¸æŠã‚»ãƒ³ã‚µãƒ¼ã®ç®¡ç†<br>- ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»æ•´å½¢                  |
| Component (`.vue`) | - UI è¡¨ç¤º (`v-select`, `apexchart`)<br>- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ storeå‘¼ã³å‡ºã— |

---

ã”å¸Œæœ›ã§ã‚ã‚Œã°ã€**ã•ã‚‰ã«ãƒªã‚¹ãƒˆé€£å‹•è¡¨ç¤º or ã‚°ãƒ©ãƒ•è¡¨ç¤ºåˆ‡æ›¿**ã‚„\*\*unitæ§‹æˆï¼ˆç´°ã‹ã„UIéƒ¨å“åˆ†é›¢ï¼‰\*\*ã®å±•é–‹ä¾‹ã‚‚ãŠå‡ºã—ã§ãã¾ã™ï¼
ã©ã†ã—ã¾ã™ã‹ï¼Ÿ
